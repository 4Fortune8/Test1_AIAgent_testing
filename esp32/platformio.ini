; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

; ============================================================================
; Hardware Configuration
; ============================================================================
; Board: ESP32-WROOM-32D on UPeasy devkit
; CAN Transceiver: SN65HVD230 (3.3V logic)
; CAN TX: GPIO5 (Pin 29)
; CAN RX: GPIO4 (Pin 26)
; CAN Bitrate: 500 kbps
; Reference: docs/agentcontext/roadmap_can_ping_pong.md
; ============================================================================

[env:upesy_wroom]
platform = espressif32
board = upesy_wroom
framework = arduino

; Monitor configuration
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags for CAN configuration
build_flags = 
    -D CAN_TX_GPIO=5        ; GPIO5, Pin 29 - Safe default, no boot conflicts
    -D CAN_RX_GPIO=4        ; GPIO4, Pin 26 - Safe default, no boot conflicts
    -D CAN_BITRATE=500000   ; 500 kbps
    -D CORE_DEBUG_LEVEL=3   ; Info level logging (0=None, 5=Verbose)

; Library dependencies
lib_deps = 
    ; ESP32 CAN driver (uses TWAI peripheral)
    ; Alternative options:
    ; - sandeepmistry/CAN@^0.3.1  (Arduino CAN library)
    ; - nhatuan84/esp32-can@^1.0.0
    ; Note: ESP-IDF TWAI driver is built-in, no external library needed

; Upload configuration
upload_speed = 921600
upload_port = /dev/ttyUSB0  ; Adjust to your serial port (check with: ls /dev/ttyUSB*)

; Partition scheme (if needed for larger programs)
; board_build.partitions = default.csv

; Additional build settings
build_type = debug  ; Use 'release' for production

